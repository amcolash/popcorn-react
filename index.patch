*** index-orig.js	2018-05-14 10:26:26.373566172 -0700
--- index.js	2018-05-14 10:25:51.005307127 -0700
***************
*** 9,14 ****
--- 9,15 ----
    store = require('./store'),
    progress = require('./progressbar'),
    stats = require('./stats'),
+   http = require('http'),
    api = express();
  
  api.use(express.json());
***************
*** 59,64 ****
--- 60,85 ----
    next();
  }
  
+ api.get('/ip', function(req, res) {
+   http.get('http://ipinfo.io/ip', (resp) => {
+     let data = '';
+ 
+     // A chunk of data has been recieved.
+     resp.on('data', (chunk) => {
+       data += chunk;
+     });
+ 
+     // The whole response has been received. Print out the result.
+     resp.on('end', () => {
+       res.send(data);
+     });
+ 
+   }).on("error", (err) => {
+     console.log("Error: " + err.message);
+     res.send("unknown");
+   });
+ });
+ 
  api.get('/torrents', function (req, res) {
    res.send(store.list().map(serialize));
  });
